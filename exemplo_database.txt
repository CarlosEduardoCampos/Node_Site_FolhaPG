CREATE DATABASE IF NOT EXISTS folha_pg;

USE folha_pg;

CREATE TABLE IF NOT EXISTS fpg_tiposlogin(
    ID_tipo INTEGER NOT NULL PRIMARY KEY AUTO_INCREMENT,
    tipo VARCHAR(50) NOT NULL,
    descricao VARCHAR(200)
);

CREATE TABLE IF NOT EXISTS fpg_logins(
    ID_login INTEGER NOT NULL PRIMARY KEY AUTO_INCREMENT,
    nome VARCHAR(50) NOT NULL,
    telefone VARCHAR(18) NOT NULL,
    email VARCHAR(200) NOT NULL,
    senha VARCHAR(200) NOT NULL,
    FK_tipo INTEGER NOT NULL,
    FOREIGN KEY (FK_tipo) REFERENCES fpg_tiposlogin(ID_tipo)
);
CREATE TABLE IF NOT EXISTS fpg_empresas(
	ID_empresa INTEGER NOT NULL PRIMARY KEY AUTO_INCREMENT,
    cnpj VARCHAR(18) NOT NULL,
    FK_login INTEGER NOT NULL,
    FOREIGN KEY (FK_login) REFERENCES fpg_logins(ID_login)
);

CREATE TABLE IF NOT EXISTS fpg_periodosdepagamento(
	ID_periodo INTEGER NOT NULL PRIMARY KEY AUTO_INCREMENT,
    titulo VARCHAR(50) NOT NULL,
    numero_de_dias INTEGER
);

CREATE TABLE IF NOT EXISTS fpg_turnos(
	ID_turno INTEGER NOT NULL PRIMARY KEY AUTO_INCREMENT,
    titulo VARCHAR(50) NOT NULL,
    descricao varchar(200)
);

CREATE TABLE IF NOT EXISTS fpg_colaboradores(
    ID_colaborador INTEGER PRIMARY KEY AUTO_INCREMENT,
    cargo varchar(15) NOT NULL,
    salario DECIMAL(10, 2) NOT NULL,
    DT_adimissao DATE NOT NULL,
    DT_demissao DATE,
    FK_empresa INTEGER NOT NULL,
    FK_periodo INTEGER,
    FK_turno INTEGER,
    FK_login INTEGER NOT NULL,
    FOREIGN KEY (FK_login) REFERENCES fpg_logins(ID_login),
    FOREIGN KEY (FK_periodo) REFERENCES fpg_periodosdepagamento(ID_periodo),
    FOREIGN KEY (FK_empresa) REFERENCES fpg_empresas(ID_empresa),
    FOREIGN KEY (FK_turno) REFERENCES fpg_turnos(ID_turno)
);

CREATE TABLE  IF NOT EXISTS fpg_descontos(
	ID_desconto INTEGER NOT NULL PRIMARY KEY AUTO_INCREMENT,
    titulo VARCHAR(50) NOT NULL,
    descricao VARCHAR(200)
);

# Unindo a tabela de descontos e colaborador:
CREATE TABLE IF NOT EXISTS fpg_descontoscolaboradores(
	FK_desconto INTEGER NOT NULL,
    FK_colaborador INTEGER NOT NULL,
    FOREIGN KEY (FK_desconto) REFERENCES fpg_descontos(ID_desconto),
    FOREIGN KEY (FK_colaborador) REFERENCES fpg_colaboradores(ID_colaborador)
);

CREATE TABLE IF NOT EXISTS fpg_beneficios(
	ID_beneficio INTEGER NOT NULL PRIMARY KEY AUTO_INCREMENT,
    titulo VARCHAR(50) NOT NULL,
    descricao VARCHAR(200)
);

# Unindo a tabela de beneficios e colaborador:
CREATE TABLE IF NOT EXISTS fpg_beneficioscolaboradores(
	FK_beneficio INTEGER NOT NULL,
    FK_colaborador INTEGER NOT NULL,
    FOREIGN KEY (FK_beneficio) REFERENCES fpg_beneficios(ID_beneficio),
    FOREIGN KEY (FK_colaborador) REFERENCES fpg_colaboradores(ID_colaborador)
);

CREATE TABLE IF NOT EXISTS fpg_horasextra(
    horas INTEGER,
    minutos INTEGER,
    mes INTEGER NOT NULL,
    ano INTEGER NOT NULL,
    dia DATE NOT NULL,
    FK_colaborador INTEGER NOT NULL,
    FOREIGN KEY (FK_colaborador) REFERENCES fpg_colaboradores(ID_colaborador)
);


-- Inserindo dados na tabela fpg_tiposlogin
INSERT INTO fpg_tiposlogin(tipo, descricao) VALUES ('Administrador', 'Acesso total ao sistema');
INSERT INTO fpg_tiposlogin(tipo, descricao) VALUES ('Gerente', 'Acesso limitado ao sistema');
INSERT INTO fpg_tiposlogin(tipo, descricao) VALUES ('Funcionário', 'Acesso restrito ao sistema');
INSERT INTO fpg_tiposlogin(tipo, descricao) VALUES ('Visitante', 'Acesso mínimo ao sistema');

-- Inserindo dados na tabela fpg_logins
INSERT INTO fpg_logins(nome, telefone, email, senha, FK_tipo) VALUES ('João Silva', '+5511999999999', 'joao.silva@email.com', 'senha123', 1);
INSERT INTO fpg_logins(nome, telefone, email, senha, FK_tipo) VALUES ('Maria Santos', '+5511888888888', 'maria.santos@email.com', 'senha123', 2);
INSERT INTO fpg_logins(nome, telefone, email, senha, FK_tipo) VALUES ('Carlos Pereira', '+5511777777777', 'carlos.pereira@email.com', 'senha123', 3);
INSERT INTO fpg_logins(nome, telefone, email, senha, FK_tipo) VALUES ('Ana Costa', '+5511666666666', 'ana.costa@email.com', 'senha123', 4);

-- Inserindo dados na tabela fpg_empresas
INSERT INTO fpg_empresas(cnpj, FK_login) VALUES ('56.789.123/0001-44', 2);

-- Inserindo dados na tabela fpg_periodosdepagamento
INSERT INTO fpg_periodosdepagamento(titulo, numero_de_dias) VALUES ('Mensal', 30);
INSERT INTO fpg_periodosdepagamento(titulo, numero_de_dias) VALUES ('Semanal', 7);
INSERT INTO fpg_periodosdepagamento(titulo, numero_de_dias) VALUES ('Quinzenal', 15);
INSERT INTO fpg_periodosdepagamento(titulo, numero_de_dias) VALUES ('Diário', 1);

-- Inserindo dados na tabela fpg_turnos
INSERT INTO fpg_turnos(titulo, descricao) VALUES ('Manhã', 'Das 8h às 12h');
INSERT INTO fpg_turnos(titulo, descricao) VALUES ('Tarde', 'Das 13h às 17h');
INSERT INTO fpg_turnos(titulo, descricao) VALUES ('Noite', 'Das 18h às 22h');
INSERT INTO fpg_turnos(titulo, descricao) VALUES ('Madrugada', 'Das 23h às 3h');

-- Inserindo dados na tabela fpg_colaboradores
INSERT INTO fpg_colaboradores(cargo, salario, DT_adimissao, FK_empresa, FK_periodo, FK_turno, FK_login) VALUES ('Desenvolvedor', 4000.00, '2024-01-01', 1, 3, 3, 3);
INSERT INTO fpg_colaboradores(cargo, salario, DT_adimissao, FK_empresa, FK_periodo, FK_turno, FK_login) VALUES ('Estagiário', 1500.00, '2024-01-01', 1, 4, 4, 4);

-- Inserindo dados na tabela fpg_descontos
INSERT INTO fpg_descontos(titulo, descricao) VALUES ('INSS', 'Desconto do INSS');
INSERT INTO fpg_descontos(titulo, descricao) VALUES ('IRPF', 'Desconto do Imposto de Renda');
INSERT INTO fpg_descontos(titulo, descricao) VALUES ('Vale Transporte', 'Desconto do Vale Transporte');
INSERT INTO fpg_descontos(titulo, descricao) VALUES ('Plano de Saúde', 'Desconto do Plano de Saúde');

-- Inserindo dados na tabela fpg_beneficios
INSERT INTO fpg_beneficios(titulo, descricao) VALUES ('Vale Alimentação', 'Benefício de Vale Alimentação');
INSERT INTO fpg_beneficios(titulo, descricao) VALUES ('Vale Refeição', 'Benefício de Vale Refeição');
INSERT INTO fpg_beneficios(titulo, descricao) VALUES ('Vale Transporte', 'Benefício de Vale Transporte');
INSERT INTO fpg_beneficios(titulo, descricao) VALUES ('Plano de Saúde', 'Benefício de Plano de Saúde');

-- Inserindo dados na tabela fpg_beneficioscolaboradores
INSERT INTO fpg_beneficioscolaboradores(FK_beneficio, FK_colaborador) VALUES (1, 1);
INSERT INTO fpg_beneficioscolaboradores(FK_beneficio, FK_colaborador) VALUES (2, 2);

-- Inserindo dados na tabela fpg_horasextra
INSERT INTO fpg_horasextra(horas, minutos, mes, ano, dia, FK_colaborador) VALUES (3, 15, 2, 2024, '2024-02-03', 1);
INSERT INTO fpg_horasextra(horas, minutos, mes, ano, dia, FK_colaborador) VALUES (2, 0, 2, 2024, '2024-02-04', 2);



